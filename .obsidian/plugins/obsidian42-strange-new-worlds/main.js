var tn=Object.defineProperty;var Xr=Object.getOwnPropertyDescriptor;var zr=Object.getOwnPropertyNames;var Kr=Object.prototype.hasOwnProperty;var Jr=(e,t)=>{for(var n in t)tn(e,n,{get:t[n],enumerable:!0})},Qr=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of zr(t))!Kr.call(e,i)&&i!==n&&tn(e,i,{get:()=>t[i],enumerable:!(r=Xr(t,i))||r.enumerable});return e};var Zr=e=>Qr(tn({},"__esModule",{value:!0}),e);var co={};Jr(co,{default:()=>it});module.exports=Zr(co);var $e=require("obsidian");var ft=require("obsidian"),de,rn,An=0,ct;function Mn(e){ct=e}function ut(){return de}function Nt(){return rn}function Ft(){rn=ct.app.fileManager.getAllLinkResolutions(),de=rn.reduce((t,n)=>{let r="",i="";return r=n.reference.link,i=n.resolvedFile.path.replace(n.resolvedFile.name,"")+n.reference.link,r===i&&(i=null),t[r]||(t[r]=[]),t[r].push(n),i!=null&&(t[i]||(t[i]=[]),t[i].push(n)),t},{}),window.snwAPI.references=de,An=Date.now()}var nn=new Map;function Se(e){if(nn.has(e.path)){let i=nn.get(e.path);if(An<i.createDate&&i.createDate+ct.settings.cacheUpdateInMilliseconds>Date.now())return i}let t={},n=ct.app.metadataCache.getFileCache(e);if(!n)return t;de||Ft();let r=Object.values(ct.app.metadataCache.metadataCache).reduce((i,a)=>{let l=a.headings;return l&&l.forEach(s=>{i.push(s.heading)}),i},[]);if(n!=null&&n.blocks){let i=e.path.replace(".md","");t.blocks=Object.values(n.blocks).map(a=>({key:i+"#^"+a.id,pos:a.position,page:e.basename,type:"block",references:de[i+"#^"+a.id]||[]}))}return n!=null&&n.headings&&(t.headings=n.headings.map(i=>({original:"#".repeat(i.level)+" "+i.heading,key:`${e.path.replace(".md","")}#${(0,ft.stripHeading)(i.heading)}`,headerMatch:i.heading,headerMatch2:e.basename+"#"+i.heading,pos:i.position,page:e.basename,type:"heading",references:de[`${e.path.replace(".md","")}#${(0,ft.stripHeading)(i.heading)}`]||de[`${e.basename}$#${(0,ft.stripHeading)(i.heading)}`]||[]}))),n!=null&&n.links&&(t.links=n.links.map(i=>({key:i.link,original:i.original,type:"link",pos:i.position,page:e.basename,references:de[i.link]||[]})),t.links&&(t.links=t.links.map(i=>{if(i.key.includes("#")&&!i.key.includes("#^")){let a=r.filter(l=>(0,ft.stripHeading)(l)===i.key.split("#")[1])[0];i.original=a||void 0}return i}))),n!=null&&n.embeds&&(t.embeds=n.embeds.map(i=>({key:i.link,page:e.basename,type:"embed",pos:i.position,references:de[i.link]||[]})),t.embeds&&(t.embeds=t.embeds.map(i=>{if(i.key.includes("#")&&!i.key.includes("#^")&&t.headings){let a=r.filter(l=>l.includes(i.key.split("#")[1]))[0];i.original=a||void 0}return(i.key.startsWith("#^")||i.key.startsWith("#"))&&(i.key=`${e.basename}${i.key}`,i.references=de[i.key]||[]),i}))),t.cacheMetaData=n,t.createDate=Date.now(),nn.set(e.path,t),t}var Ce=require("@codemirror/view"),Rr=require("obsidian");var M="top",W="bottom",V="right",H="left",Ht="auto",Oe=[M,W,V,H],ye="start",Me="end",Nn="clippingParents",Vt="viewport",Ke="popper",Fn="reference",on=Oe.reduce(function(e,t){return e.concat([t+"-"+ye,t+"-"+Me])},[]),Wt=[].concat(Oe,[Ht]).reduce(function(e,t){return e.concat([t,t+"-"+ye,t+"-"+Me])},[]),ei="beforeRead",ti="read",ni="afterRead",ri="beforeMain",ii="main",oi="afterMain",ai="beforeWrite",si="write",li="afterWrite",Hn=[ei,ti,ni,ri,ii,oi,ai,si,li];function j(e){return e?(e.nodeName||"").toLowerCase():null}function D(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ee(e){var t=D(e).Element;return e instanceof t||e instanceof Element}function B(e){var t=D(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Je(e){if(typeof ShadowRoot=="undefined")return!1;var t=D(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function pi(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},a=t.elements[n];!B(a)||!j(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(l){var s=i[l];s===!1?a.removeAttribute(l):a.setAttribute(l,s===!0?"":s)}))})}function fi(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],a=t.attributes[r]||{},l=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=l.reduce(function(o,f){return o[f]="",o},{});!B(i)||!j(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(o){i.removeAttribute(o)}))})}}var dt={name:"applyStyles",enabled:!0,phase:"write",fn:pi,effect:fi,requires:["computeStyles"]};function _(e){return e.split("-")[0]}var oe=Math.max,Ne=Math.min,Pe=Math.round;function Qe(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function mt(){return!/^((?!chrome|android).)*safari/i.test(Qe())}function te(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&B(e)&&(i=e.offsetWidth>0&&Pe(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Pe(r.height)/e.offsetHeight||1);var l=ee(e)?D(e):window,s=l.visualViewport,o=!mt()&&n,f=(r.left+(o&&s?s.offsetLeft:0))/i,u=(r.top+(o&&s?s.offsetTop:0))/a,w=r.width/i,v=r.height/a;return{width:w,height:v,top:u,right:f+w,bottom:u+v,left:f,x:f,y:u}}function Fe(e){var t=te(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function gt(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Je(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function z(e){return D(e).getComputedStyle(e)}function an(e){return["table","td","th"].indexOf(j(e))>=0}function $(e){return((ee(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ee(e){return j(e)==="html"?e:e.assignedSlot||e.parentNode||(Je(e)?e.host:null)||$(e)}function Vn(e){return!B(e)||z(e).position==="fixed"?null:e.offsetParent}function ci(e){var t=/firefox/i.test(Qe()),n=/Trident/i.test(Qe());if(n&&B(e)){var r=z(e);if(r.position==="fixed")return null}var i=Ee(e);for(Je(i)&&(i=i.host);B(i)&&["html","body"].indexOf(j(i))<0;){var a=z(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function ae(e){for(var t=D(e),n=Vn(e);n&&an(n)&&z(n).position==="static";)n=Vn(n);return n&&(j(n)==="html"||j(n)==="body"&&z(n).position==="static")?t:n||ci(e)||t}function He(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ve(e,t,n){return oe(e,Ne(t,n))}function Wn(e,t,n){var r=Ve(e,t,n);return r>n?n:r}function ht(){return{top:0,right:0,bottom:0,left:0}}function vt(e){return Object.assign({},ht(),e)}function wt(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var ui=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,vt(typeof t!="number"?t:wt(t,Oe))};function di(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,l=n.modifiersData.popperOffsets,s=_(n.placement),o=He(s),f=[H,V].indexOf(s)>=0,u=f?"height":"width";if(!(!a||!l)){var w=ui(i.padding,n),v=Fe(a),g=o==="y"?M:H,b=o==="y"?W:V,h=n.rects.reference[u]+n.rects.reference[o]-l[o]-n.rects.popper[u],P=l[o]-n.rects.reference[o],C=ae(a),S=C?o==="y"?C.clientHeight||0:C.clientWidth||0:0,L=h/2-P/2,p=w[g],E=S-v[u]-w[b],d=S/2-v[u]/2+L,O=Ve(p,d,E),N=o;n.modifiersData[r]=(t={},t[N]=O,t.centerOffset=O-d,t)}}function mi(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!gt(t.elements.popper,i)||(t.elements.arrow=i))}var Bn={name:"arrow",enabled:!0,phase:"main",fn:di,effect:mi,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ne(e){return e.split("-")[1]}var gi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hi(e){var t=e.x,n=e.y,r=window,i=r.devicePixelRatio||1;return{x:Pe(t*i)/i||0,y:Pe(n*i)/i||0}}function jn(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,l=e.offsets,s=e.position,o=e.gpuAcceleration,f=e.adaptive,u=e.roundOffsets,w=e.isFixed,v=l.x,g=v===void 0?0:v,b=l.y,h=b===void 0?0:b,P=typeof u=="function"?u({x:g,y:h}):{x:g,y:h};g=P.x,h=P.y;var C=l.hasOwnProperty("x"),S=l.hasOwnProperty("y"),L=H,p=M,E=window;if(f){var d=ae(n),O="clientHeight",N="clientWidth";if(d===D(n)&&(d=$(n),z(d).position!=="static"&&s==="absolute"&&(O="scrollHeight",N="scrollWidth")),d=d,i===M||(i===H||i===V)&&a===Me){p=W;var F=w&&d===E&&E.visualViewport?E.visualViewport.height:d[O];h-=F-r.height,h*=o?1:-1}if(i===H||(i===M||i===W)&&a===Me){L=V;var A=w&&d===E&&E.visualViewport?E.visualViewport.width:d[N];g-=A-r.width,g*=o?1:-1}}var k=Object.assign({position:s},f&&gi),I=u===!0?hi({x:g,y:h}):{x:g,y:h};if(g=I.x,h=I.y,o){var R;return Object.assign({},k,(R={},R[p]=S?"0":"",R[L]=C?"0":"",R.transform=(E.devicePixelRatio||1)<=1?"translate("+g+"px, "+h+"px)":"translate3d("+g+"px, "+h+"px, 0)",R))}return Object.assign({},k,(t={},t[p]=S?h+"px":"",t[L]=C?g+"px":"",t.transform="",t))}function vi(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,l=a===void 0?!0:a,s=n.roundOffsets,o=s===void 0?!0:s;if(!1)var f;var u={placement:_(t.placement),variation:ne(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,jn(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:o})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,jn(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var _n={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:vi,data:{}};var Bt={passive:!0};function wi(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=i===void 0?!0:i,l=r.resize,s=l===void 0?!0:l,o=D(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&f.forEach(function(u){u.addEventListener("scroll",n.update,Bt)}),s&&o.addEventListener("resize",n.update,Bt),function(){a&&f.forEach(function(u){u.removeEventListener("scroll",n.update,Bt)}),s&&o.removeEventListener("resize",n.update,Bt)}}var Un={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wi,data:{}};var bi={left:"right",right:"left",bottom:"top",top:"bottom"};function Ze(e){return e.replace(/left|right|bottom|top/g,function(t){return bi[t]})}var yi={start:"end",end:"start"};function jt(e){return e.replace(/start|end/g,function(t){return yi[t]})}function We(e){var t=D(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Be(e){return te($(e)).left+We(e).scrollLeft}function sn(e,t){var n=D(e),r=$(e),i=n.visualViewport,a=r.clientWidth,l=r.clientHeight,s=0,o=0;if(i){a=i.width,l=i.height;var f=mt();(f||!f&&t==="fixed")&&(s=i.offsetLeft,o=i.offsetTop)}return{width:a,height:l,x:s+Be(e),y:o}}function ln(e){var t,n=$(e),r=We(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=oe(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=oe(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Be(e),o=-r.scrollTop;return z(i||n).direction==="rtl"&&(s+=oe(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:l,x:s,y:o}}function je(e){var t=z(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function _t(e){return["html","body","#document"].indexOf(j(e))>=0?e.ownerDocument.body:B(e)&&je(e)?e:_t(Ee(e))}function Ie(e,t){var n;t===void 0&&(t=[]);var r=_t(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),a=D(r),l=i?[a].concat(a.visualViewport||[],je(r)?r:[]):r,s=t.concat(l);return i?s:s.concat(Ie(Ee(l)))}function et(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Pi(e,t){var n=te(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function $n(e,t,n){return t===Vt?et(sn(e,n)):ee(t)?Pi(t,n):et(ln($(e)))}function Ei(e){var t=Ie(Ee(e)),n=["absolute","fixed"].indexOf(z(e).position)>=0,r=n&&B(e)?ae(e):e;return ee(r)?t.filter(function(i){return ee(i)&&gt(i,r)&&j(i)!=="body"}):[]}function pn(e,t,n,r){var i=t==="clippingParents"?Ei(e):[].concat(t),a=[].concat(i,[n]),l=a[0],s=a.reduce(function(o,f){var u=$n(e,f,r);return o.top=oe(u.top,o.top),o.right=Ne(u.right,o.right),o.bottom=Ne(u.bottom,o.bottom),o.left=oe(u.left,o.left),o},$n(e,l,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function bt(e){var t=e.reference,n=e.element,r=e.placement,i=r?_(r):null,a=r?ne(r):null,l=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,o;switch(i){case M:o={x:l,y:t.y-n.height};break;case W:o={x:l,y:t.y+t.height};break;case V:o={x:t.x+t.width,y:s};break;case H:o={x:t.x-n.width,y:s};break;default:o={x:t.x,y:t.y}}var f=i?He(i):null;if(f!=null){var u=f==="y"?"height":"width";switch(a){case ye:o[f]=o[f]-(t[u]/2-n[u]/2);break;case Me:o[f]=o[f]+(t[u]/2-n[u]/2);break;default:}}return o}function se(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,a=n.strategy,l=a===void 0?e.strategy:a,s=n.boundary,o=s===void 0?Nn:s,f=n.rootBoundary,u=f===void 0?Vt:f,w=n.elementContext,v=w===void 0?Ke:w,g=n.altBoundary,b=g===void 0?!1:g,h=n.padding,P=h===void 0?0:h,C=vt(typeof P!="number"?P:wt(P,Oe)),S=v===Ke?Fn:Ke,L=e.rects.popper,p=e.elements[b?S:v],E=pn(ee(p)?p:p.contextElement||$(e.elements.popper),o,u,l),d=te(e.elements.reference),O=bt({reference:d,element:L,strategy:"absolute",placement:i}),N=et(Object.assign({},L,O)),F=v===Ke?N:d,A={top:E.top-F.top+C.top,bottom:F.bottom-E.bottom+C.bottom,left:E.left-F.left+C.left,right:F.right-E.right+C.right},k=e.modifiersData.offset;if(v===Ke&&k){var I=k[i];Object.keys(A).forEach(function(R){var K=[V,W].indexOf(R)>=0?1:-1,J=[M,W].indexOf(R)>=0?"y":"x";A[R]+=I[J]*K})}return A}function fn(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,l=n.padding,s=n.flipVariations,o=n.allowedAutoPlacements,f=o===void 0?Wt:o,u=ne(r),w=u?s?on:on.filter(function(b){return ne(b)===u}):Oe,v=w.filter(function(b){return f.indexOf(b)>=0});v.length===0&&(v=w);var g=v.reduce(function(b,h){return b[h]=se(e,{placement:h,boundary:i,rootBoundary:a,padding:l})[_(h)],b},{});return Object.keys(g).sort(function(b,h){return g[b]-g[h]})}function xi(e){if(_(e)===Ht)return[];var t=Ze(e);return[jt(e),t,jt(t)]}function Ci(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,l=n.altAxis,s=l===void 0?!0:l,o=n.fallbackPlacements,f=n.padding,u=n.boundary,w=n.rootBoundary,v=n.altBoundary,g=n.flipVariations,b=g===void 0?!0:g,h=n.allowedAutoPlacements,P=t.options.placement,C=_(P),S=C===P,L=o||(S||!b?[Ze(P)]:xi(P)),p=[P].concat(L).reduce(function(he,ie){return he.concat(_(ie)===Ht?fn(t,{placement:ie,boundary:u,rootBoundary:w,padding:f,flipVariations:b,allowedAutoPlacements:h}):ie)},[]),E=t.rects.reference,d=t.rects.popper,O=new Map,N=!0,F=p[0],A=0;A<p.length;A++){var k=p[A],I=_(k),R=ne(k)===ye,K=[M,W].indexOf(I)>=0,J=K?"width":"height",G=se(t,{placement:k,boundary:u,rootBoundary:w,altBoundary:v,padding:f}),Y=K?R?V:H:R?W:M;E[J]>d[J]&&(Y=Ze(Y));var U=Ze(Y),fe=[];if(a&&fe.push(G[I]<=0),s&&fe.push(G[Y]<=0,G[U]<=0),fe.every(function(he){return he})){F=k,N=!1;break}O.set(k,fe)}if(N)for(var ce=b?3:1,Le=function(ie){var ve=p.find(function(qe){var we=O.get(qe);if(we)return we.slice(0,ie).every(function(Ge){return Ge})});if(ve)return F=ve,"break"},ue=ce;ue>0;ue--){var Re=Le(ue);if(Re==="break")break}t.placement!==F&&(t.modifiersData[r]._skip=!0,t.placement=F,t.reset=!0)}}var qn={name:"flip",enabled:!0,phase:"main",fn:Ci,requiresIfExists:["offset"],data:{_skip:!1}};function Gn(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Yn(e){return[M,V,W,H].some(function(t){return e[t]>=0})}function Ti(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,l=se(t,{elementContext:"reference"}),s=se(t,{altBoundary:!0}),o=Gn(l,r),f=Gn(s,i,a),u=Yn(o),w=Yn(f);t.modifiersData[n]={referenceClippingOffsets:o,popperEscapeOffsets:f,isReferenceHidden:u,hasPopperEscaped:w},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":w})}var Xn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ti};function ki(e,t,n){var r=_(e),i=[H,M].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,l=a[0],s=a[1];return l=l||0,s=(s||0)*i,[H,V].indexOf(r)>=0?{x:s,y:l}:{x:l,y:s}}function Si(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=i===void 0?[0,0]:i,l=Wt.reduce(function(u,w){return u[w]=ki(w,t.rects,a),u},{}),s=l[t.placement],o=s.x,f=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=o,t.modifiersData.popperOffsets.y+=f),t.modifiersData[r]=l}var zn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Si};function Oi(e){var t=e.state,n=e.name;t.modifiersData[n]=bt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Kn={name:"popperOffsets",enabled:!0,phase:"read",fn:Oi,data:{}};function cn(e){return e==="x"?"y":"x"}function Ii(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=i===void 0?!0:i,l=n.altAxis,s=l===void 0?!1:l,o=n.boundary,f=n.rootBoundary,u=n.altBoundary,w=n.padding,v=n.tether,g=v===void 0?!0:v,b=n.tetherOffset,h=b===void 0?0:b,P=se(t,{boundary:o,rootBoundary:f,padding:w,altBoundary:u}),C=_(t.placement),S=ne(t.placement),L=!S,p=He(C),E=cn(p),d=t.modifiersData.popperOffsets,O=t.rects.reference,N=t.rects.popper,F=typeof h=="function"?h(Object.assign({},t.rects,{placement:t.placement})):h,A=typeof F=="number"?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(!!d){if(a){var R,K=p==="y"?M:H,J=p==="y"?W:V,G=p==="y"?"height":"width",Y=d[p],U=Y+P[K],fe=Y-P[J],ce=g?-N[G]/2:0,Le=S===ye?O[G]:N[G],ue=S===ye?-N[G]:-O[G],Re=t.elements.arrow,he=g&&Re?Fe(Re):{width:0,height:0},ie=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ht(),ve=ie[K],qe=ie[J],we=Ve(0,O[G],he[G]),Ge=L?O[G]/2-ce-we-ve-A.mainAxis:Le-we-ve-A.mainAxis,Te=L?-O[G]/2+ce+we+qe+A.mainAxis:ue+we+qe+A.mainAxis,Ye=t.elements.arrow&&ae(t.elements.arrow),Ct=Ye?p==="y"?Ye.clientTop||0:Ye.clientLeft||0:0,ot=(R=k==null?void 0:k[p])!=null?R:0,Tt=Y+Ge-ot-Ct,kt=Y+Te-ot,at=Ve(g?Ne(U,Tt):U,Y,g?oe(fe,kt):fe);d[p]=at,I[p]=at-Y}if(s){var st,St=p==="x"?M:H,Ot=p==="x"?W:V,be=d[E],ke=E==="y"?"height":"width",lt=be+P[St],De=be-P[Ot],pt=[M,H].indexOf(C)!==-1,It=(st=k==null?void 0:k[E])!=null?st:0,Lt=pt?lt:be-O[ke]-N[ke]-It+A.altAxis,Rt=pt?be+O[ke]+N[ke]-It-A.altAxis:De,Dt=g&&pt?Wn(Lt,be,Rt):Ve(g?Lt:lt,be,g?Rt:De);d[E]=Dt,I[E]=Dt-be}t.modifiersData[r]=I}}var Jn={name:"preventOverflow",enabled:!0,phase:"main",fn:Ii,requiresIfExists:["offset"]};function un(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function dn(e){return e===D(e)||!B(e)?We(e):un(e)}function Li(e){var t=e.getBoundingClientRect(),n=Pe(t.width)/e.offsetWidth||1,r=Pe(t.height)/e.offsetHeight||1;return n!==1||r!==1}function mn(e,t,n){n===void 0&&(n=!1);var r=B(t),i=B(t)&&Li(t),a=$(t),l=te(e,i,n),s={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(r||!r&&!n)&&((j(t)!=="body"||je(a))&&(s=dn(t)),B(t)?(o=te(t,!0),o.x+=t.clientLeft,o.y+=t.clientTop):a&&(o.x=Be(a))),{x:l.left+s.scrollLeft-o.x,y:l.top+s.scrollTop-o.y,width:l.width,height:l.height}}function Ri(e){var t=new Map,n=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function i(a){n.add(a.name);var l=[].concat(a.requires||[],a.requiresIfExists||[]);l.forEach(function(s){if(!n.has(s)){var o=t.get(s);o&&i(o)}}),r.push(a)}return e.forEach(function(a){n.has(a.name)||i(a)}),r}function gn(e){var t=Ri(e);return Hn.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function hn(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function vn(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Qn={placement:"bottom",modifiers:[],strategy:"absolute"};function Zn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function er(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,a=i===void 0?Qn:i;return function(s,o,f){f===void 0&&(f=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qn,a),modifiersData:{},elements:{reference:s,popper:o},attributes:{},styles:{}},w=[],v=!1,g={state:u,setOptions:function(C){var S=typeof C=="function"?C(u.options):C;h(),u.options=Object.assign({},a,u.options,S),u.scrollParents={reference:ee(s)?Ie(s):s.contextElement?Ie(s.contextElement):[],popper:Ie(o)};var L=gn(vn([].concat(r,u.options.modifiers)));if(u.orderedModifiers=L.filter(function(k){return k.enabled}),!1){var p;if(getBasePlacement(u.options.placement)===auto)var E;var d,O,N,F,A}return b(),g.update()},forceUpdate:function(){if(!v){var C=u.elements,S=C.reference,L=C.popper;if(!!Zn(S,L)){u.rects={reference:mn(S,ae(L),u.options.strategy==="fixed"),popper:Fe(L)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(k){return u.modifiersData[k.name]=Object.assign({},k.data)});for(var p=0,E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var d=u.orderedModifiers[E],O=d.fn,N=d.options,F=N===void 0?{}:N,A=d.name;typeof O=="function"&&(u=O({state:u,options:F,name:A,instance:g})||u)}}}},update:hn(function(){return new Promise(function(P){g.forceUpdate(),P(u)})}),destroy:function(){h(),v=!0}};if(!Zn(s,o))return g;g.setOptions(f).then(function(P){!v&&f.onFirstUpdate&&f.onFirstUpdate(P)});function b(){u.orderedModifiers.forEach(function(P){var C=P.name,S=P.options,L=S===void 0?{}:S,p=P.effect;if(typeof p=="function"){var E=p({state:u,name:C,instance:g,options:L}),d=function(){};w.push(E||d)}})}function h(){w.forEach(function(P){return P()}),w=[]}return g}}var Di=[Un,Kn,_n,dt,zn,qn,Jn,Bn,Xn],wn=er({defaultModifiers:Di});var Ai="tippy-box",fr="tippy-content",Mi="tippy-backdrop",cr="tippy-arrow",ur="tippy-svg-arrow",_e={passive:!0,capture:!0},dr=function(){return document.body};function bn(e,t,n){if(Array.isArray(e)){var r=e[t];return r==null?Array.isArray(n)?n[t]:n:r}return e}function Cn(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function mr(e,t){return typeof e=="function"?e.apply(void 0,t):e}function tr(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function Ni(e){return e.split(/\s+/).filter(Boolean)}function tt(e){return[].concat(e)}function nr(e,t){e.indexOf(t)===-1&&e.push(t)}function Fi(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function Hi(e){return e.split("-")[0]}function qt(e){return[].slice.call(e)}function rr(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function yt(){return document.createElement("div")}function Gt(e){return["Element","Fragment"].some(function(t){return Cn(e,t)})}function Vi(e){return Cn(e,"NodeList")}function Wi(e){return Cn(e,"MouseEvent")}function gr(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function Bi(e){return Gt(e)?[e]:Vi(e)?qt(e):Array.isArray(e)?e:qt(document.querySelectorAll(e))}function yn(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function ir(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function ji(e){var t,n=tt(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function _i(e,t){var n=t.clientX,r=t.clientY;return e.every(function(i){var a=i.popperRect,l=i.popperState,s=i.props,o=s.interactiveBorder,f=Hi(l.placement),u=l.modifiersData.offset;if(!u)return!0;var w=f==="bottom"?u.top.y:0,v=f==="top"?u.bottom.y:0,g=f==="right"?u.left.x:0,b=f==="left"?u.right.x:0,h=a.top-r+w>o,P=r-a.bottom-v>o,C=a.left-n+g>o,S=n-a.right-b>o;return h||P||C||S})}function Pn(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[r](i,n)})}function or(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var me={isTouch:!1},ar=0;function Ui(){me.isTouch||(me.isTouch=!0,window.performance&&document.addEventListener("mousemove",hr))}function hr(){var e=performance.now();e-ar<20&&(me.isTouch=!1,document.removeEventListener("mousemove",hr)),ar=e}function $i(){var e=document.activeElement;if(gr(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function qi(){document.addEventListener("touchstart",Ui,_e),window.addEventListener("blur",$i)}var Gi=typeof window!="undefined"&&typeof document!="undefined",Yi=Gi?!!window.msCrypto:!1;var Xi={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},zi={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},le=Object.assign({appendTo:dr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Xi,zi),Ki=Object.keys(le),Ji=function(t){var n=Object.keys(t);n.forEach(function(r){le[r]=t[r]})};function vr(e){var t=e.plugins||[],n=t.reduce(function(r,i){var a=i.name,l=i.defaultValue;if(a){var s;r[a]=e[a]!==void 0?e[a]:(s=le[a])!=null?s:l}return r},{});return Object.assign({},e,n)}function Qi(e,t){var n=t?Object.keys(vr(Object.assign({},le,{plugins:t}))):Ki,r=n.reduce(function(i,a){var l=(e.getAttribute("data-tippy-"+a)||"").trim();if(!l)return i;if(a==="content")i[a]=l;else try{i[a]=JSON.parse(l)}catch(s){i[a]=l}return i},{});return r}function sr(e,t){var n=Object.assign({},t,{content:mr(t.content,[e])},t.ignoreAttributes?{}:Qi(e,t.plugins));return n.aria=Object.assign({},le.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var Zi=function(){return"innerHTML"};function En(e,t){e[Zi()]=t}function lr(e){var t=yt();return e===!0?t.className=cr:(t.className=ur,Gt(e)?t.appendChild(e):En(t,e)),t}function pr(e,t){Gt(t.content)?(En(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?En(e,t.content):e.textContent=t.content)}function xn(e){var t=e.firstElementChild,n=qt(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(fr)}),arrow:n.find(function(r){return r.classList.contains(cr)||r.classList.contains(ur)}),backdrop:n.find(function(r){return r.classList.contains(Mi)})}}function wr(e){var t=yt(),n=yt();n.className=Ai,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=yt();r.className=fr,r.setAttribute("data-state","hidden"),pr(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props);function i(a,l){var s=xn(t),o=s.box,f=s.content,u=s.arrow;l.theme?o.setAttribute("data-theme",l.theme):o.removeAttribute("data-theme"),typeof l.animation=="string"?o.setAttribute("data-animation",l.animation):o.removeAttribute("data-animation"),l.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?o.setAttribute("role",l.role):o.removeAttribute("role"),(a.content!==l.content||a.allowHTML!==l.allowHTML)&&pr(f,e.props),l.arrow?u?a.arrow!==l.arrow&&(o.removeChild(u),o.appendChild(lr(l.arrow))):o.appendChild(lr(l.arrow)):u&&o.removeChild(u)}return{popper:t,onUpdate:i}}wr.$$tippy=!0;var eo=1,Ut=[],$t=[];function to(e,t){var n=sr(e,Object.assign({},le,vr(rr(t)))),r,i,a,l=!1,s=!1,o=!1,f=!1,u,w,v,g=[],b=tr(Tt,n.interactiveDebounce),h,P=eo++,C=null,S=Fi(n.plugins),L={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:P,reference:e,popper:yt(),popperInstance:C,props:n,state:L,plugins:S,clearDelayTimeouts:Lt,setProps:Rt,setContent:Dt,show:_r,hide:Ur,hideWithInteractivity:$r,enable:pt,disable:It,unmount:qr,destroy:Gr};if(!n.render)return p;var E=n.render(p),d=E.popper,O=E.onUpdate;d.setAttribute("data-tippy-root",""),d.id="tippy-"+p.id,p.popper=d,e._tippy=p,d._tippy=p;var N=S.map(function(c){return c.fn(p)}),F=e.hasAttribute("aria-expanded");return Ye(),ce(),Y(),U("onCreate",[p]),n.showOnCreate&&lt(),d.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),d.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&K().addEventListener("mousemove",b)}),p;function A(){var c=p.props.touch;return Array.isArray(c)?c:[c,0]}function k(){return A()[0]==="hold"}function I(){var c;return!!((c=p.props.render)!=null&&c.$$tippy)}function R(){return h||e}function K(){var c=R().parentNode;return c?ji(c):document}function J(){return xn(d)}function G(c){return p.state.isMounted&&!p.state.isVisible||me.isTouch||u&&u.type==="focus"?0:bn(p.props.delay,c?0:1,le.delay)}function Y(c){c===void 0&&(c=!1),d.style.pointerEvents=p.props.interactive&&!c?"":"none",d.style.zIndex=""+p.props.zIndex}function U(c,m,y){if(y===void 0&&(y=!0),N.forEach(function(x){x[c]&&x[c].apply(x,m)}),y){var T;(T=p.props)[c].apply(T,m)}}function fe(){var c=p.props.aria;if(!!c.content){var m="aria-"+c.content,y=d.id,T=tt(p.props.triggerTarget||e);T.forEach(function(x){var X=x.getAttribute(m);if(p.state.isVisible)x.setAttribute(m,X?X+" "+y:y);else{var Z=X&&X.replace(y,"").trim();Z?x.setAttribute(m,Z):x.removeAttribute(m)}})}}function ce(){if(!(F||!p.props.aria.expanded)){var c=tt(p.props.triggerTarget||e);c.forEach(function(m){p.props.interactive?m.setAttribute("aria-expanded",p.state.isVisible&&m===R()?"true":"false"):m.removeAttribute("aria-expanded")})}}function Le(){K().removeEventListener("mousemove",b),Ut=Ut.filter(function(c){return c!==b})}function ue(c){if(!(me.isTouch&&(o||c.type==="mousedown"))){var m=c.composedPath&&c.composedPath()[0]||c.target;if(!(p.props.interactive&&or(d,m))){if(tt(p.props.triggerTarget||e).some(function(y){return or(y,m)})){if(me.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else U("onClickOutside",[p,c]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),s=!0,setTimeout(function(){s=!1}),p.state.isMounted||ve())}}}function Re(){o=!0}function he(){o=!1}function ie(){var c=K();c.addEventListener("mousedown",ue,!0),c.addEventListener("touchend",ue,_e),c.addEventListener("touchstart",he,_e),c.addEventListener("touchmove",Re,_e)}function ve(){var c=K();c.removeEventListener("mousedown",ue,!0),c.removeEventListener("touchend",ue,_e),c.removeEventListener("touchstart",he,_e),c.removeEventListener("touchmove",Re,_e)}function qe(c,m){Ge(c,function(){!p.state.isVisible&&d.parentNode&&d.parentNode.contains(d)&&m()})}function we(c,m){Ge(c,m)}function Ge(c,m){var y=J().box;function T(x){x.target===y&&(Pn(y,"remove",T),m())}if(c===0)return m();Pn(y,"remove",w),Pn(y,"add",T),w=T}function Te(c,m,y){y===void 0&&(y=!1);var T=tt(p.props.triggerTarget||e);T.forEach(function(x){x.addEventListener(c,m,y),g.push({node:x,eventType:c,handler:m,options:y})})}function Ye(){k()&&(Te("touchstart",ot,{passive:!0}),Te("touchend",kt,{passive:!0})),Ni(p.props.trigger).forEach(function(c){if(c!=="manual")switch(Te(c,ot),c){case"mouseenter":Te("mouseleave",kt);break;case"focus":Te(Yi?"focusout":"blur",at);break;case"focusin":Te("focusout",at);break}})}function Ct(){g.forEach(function(c){var m=c.node,y=c.eventType,T=c.handler,x=c.options;m.removeEventListener(y,T,x)}),g=[]}function ot(c){var m,y=!1;if(!(!p.state.isEnabled||st(c)||s)){var T=((m=u)==null?void 0:m.type)==="focus";u=c,h=c.currentTarget,ce(),!p.state.isVisible&&Wi(c)&&Ut.forEach(function(x){return x(c)}),c.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||l)&&p.props.hideOnClick!==!1&&p.state.isVisible?y=!0:lt(c),c.type==="click"&&(l=!y),y&&!T&&De(c)}}function Tt(c){var m=c.target,y=R().contains(m)||d.contains(m);if(!(c.type==="mousemove"&&y)){var T=ke().concat(d).map(function(x){var X,Z=x._tippy,Xe=(X=Z.popperInstance)==null?void 0:X.state;return Xe?{popperRect:x.getBoundingClientRect(),popperState:Xe,props:n}:null}).filter(Boolean);_i(T,c)&&(Le(),De(c))}}function kt(c){var m=st(c)||p.props.trigger.indexOf("click")>=0&&l;if(!m){if(p.props.interactive){p.hideWithInteractivity(c);return}De(c)}}function at(c){p.props.trigger.indexOf("focusin")<0&&c.target!==R()||p.props.interactive&&c.relatedTarget&&d.contains(c.relatedTarget)||De(c)}function st(c){return me.isTouch?k()!==c.type.indexOf("touch")>=0:!1}function St(){Ot();var c=p.props,m=c.popperOptions,y=c.placement,T=c.offset,x=c.getReferenceClientRect,X=c.moveTransition,Z=I()?xn(d).arrow:null,Xe=x?{getBoundingClientRect:x,contextElement:x.contextElement||R()}:e,Dn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(At){var ze=At.state;if(I()){var Yr=J(),en=Yr.box;["placement","reference-hidden","escaped"].forEach(function(Mt){Mt==="placement"?en.setAttribute("data-placement",ze.placement):ze.attributes.popper["data-popper-"+Mt]?en.setAttribute("data-"+Mt,""):en.removeAttribute("data-"+Mt)}),ze.attributes.popper={}}}},Ae=[{name:"offset",options:{offset:T}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!X}},Dn];I()&&Z&&Ae.push({name:"arrow",options:{element:Z,padding:3}}),Ae.push.apply(Ae,(m==null?void 0:m.modifiers)||[]),p.popperInstance=wn(Xe,d,Object.assign({},m,{placement:y,onFirstUpdate:v,modifiers:Ae}))}function Ot(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function be(){var c=p.props.appendTo,m,y=R();p.props.interactive&&c===dr||c==="parent"?m=y.parentNode:m=mr(c,[y]),m.contains(d)||m.appendChild(d),p.state.isMounted=!0,St()}function ke(){return qt(d.querySelectorAll("[data-tippy-root]"))}function lt(c){p.clearDelayTimeouts(),c&&U("onTrigger",[p,c]),ie();var m=G(!0),y=A(),T=y[0],x=y[1];me.isTouch&&T==="hold"&&x&&(m=x),m?r=setTimeout(function(){p.show()},m):p.show()}function De(c){if(p.clearDelayTimeouts(),U("onUntrigger",[p,c]),!p.state.isVisible){ve();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(c.type)>=0&&l)){var m=G(!1);m?i=setTimeout(function(){p.state.isVisible&&p.hide()},m):a=requestAnimationFrame(function(){p.hide()})}}function pt(){p.state.isEnabled=!0}function It(){p.hide(),p.state.isEnabled=!1}function Lt(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(a)}function Rt(c){if(!p.state.isDestroyed){U("onBeforeUpdate",[p,c]),Ct();var m=p.props,y=sr(e,Object.assign({},m,rr(c),{ignoreAttributes:!0}));p.props=y,Ye(),m.interactiveDebounce!==y.interactiveDebounce&&(Le(),b=tr(Tt,y.interactiveDebounce)),m.triggerTarget&&!y.triggerTarget?tt(m.triggerTarget).forEach(function(T){T.removeAttribute("aria-expanded")}):y.triggerTarget&&e.removeAttribute("aria-expanded"),ce(),Y(),O&&O(m,y),p.popperInstance&&(St(),ke().forEach(function(T){requestAnimationFrame(T._tippy.popperInstance.forceUpdate)})),U("onAfterUpdate",[p,c])}}function Dt(c){p.setProps({content:c})}function _r(){var c=p.state.isVisible,m=p.state.isDestroyed,y=!p.state.isEnabled,T=me.isTouch&&!p.props.touch,x=bn(p.props.duration,0,le.duration);if(!(c||m||y||T)&&!R().hasAttribute("disabled")&&(U("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,I()&&(d.style.visibility="visible"),Y(),ie(),p.state.isMounted||(d.style.transition="none"),I()){var X=J(),Z=X.box,Xe=X.content;yn([Z,Xe],0)}v=function(){var Ae;if(!(!p.state.isVisible||f)){if(f=!0,d.offsetHeight,d.style.transition=p.props.moveTransition,I()&&p.props.animation){var Zt=J(),At=Zt.box,ze=Zt.content;yn([At,ze],x),ir([At,ze],"visible")}fe(),ce(),nr($t,p),(Ae=p.popperInstance)==null||Ae.forceUpdate(),U("onMount",[p]),p.props.animation&&I()&&we(x,function(){p.state.isShown=!0,U("onShown",[p])})}},be()}}function Ur(){var c=!p.state.isVisible,m=p.state.isDestroyed,y=!p.state.isEnabled,T=bn(p.props.duration,1,le.duration);if(!(c||m||y)&&(U("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,f=!1,l=!1,I()&&(d.style.visibility="hidden"),Le(),ve(),Y(!0),I()){var x=J(),X=x.box,Z=x.content;p.props.animation&&(yn([X,Z],T),ir([X,Z],"hidden"))}fe(),ce(),p.props.animation?I()&&qe(T,p.unmount):p.unmount()}}function $r(c){K().addEventListener("mousemove",b),nr(Ut,b),b(c)}function qr(){p.state.isVisible&&p.hide(),p.state.isMounted&&(Ot(),ke().forEach(function(c){c._tippy.unmount()}),d.parentNode&&d.parentNode.removeChild(d),$t=$t.filter(function(c){return c!==p}),p.state.isMounted=!1,U("onHidden",[p]))}function Gr(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),Ct(),delete e._tippy,p.state.isDestroyed=!0,U("onDestroy",[p]))}}function Pt(e,t){t===void 0&&(t={});var n=le.plugins.concat(t.plugins||[]);qi();var r=Object.assign({},t,{plugins:n}),i=Bi(e);if(!1)var a,l;var s=i.reduce(function(o,f){var u=f&&to(f,r);return u&&o.push(u),o},[]);return Gt(e)?s[0]:s}Pt.defaultProps=le;Pt.setDefaultProps=Ji;Pt.currentInput=me;var br=function(t){var n=t===void 0?{}:t,r=n.exclude,i=n.duration;$t.forEach(function(a){var l=!1;if(r&&(l=gr(r)?a.reference===r:a.popper===r.popper),!l){var s=a.props.duration;a.setProps({duration:i}),a.hide(),a.state.isDestroyed||a.setProps({duration:s})}})},gp=Object.assign({},dt,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Pt.setDefaultProps({render:wr});var Yt=Pt;var kr=require("obsidian");var Tr=require("obsidian");var yr=require("obsidian"),Xt;function Pr(e){Xt=e}var Er=async e=>{let t=createDiv();t.addClass("snw-ref-item-info"),t.addClass("search-result-file-match"),t.setAttribute("snw-data-line-number",e.reference.position.start.line.toString()),t.setAttribute("snw-data-file-name",e.sourceFile.path.replace(".md","")),t.setAttribute("data-href",e.sourceFile.path.replace(".md",""));let n=await no(e.sourceFile,e.reference.position);return t.appendChild(n),t},no=async(e,t)=>{let n=await Xt.app.vault.cachedRead(e),r=Xt.app.metadataCache.getFileCache(e),i=0,a=0;for(let o=0;o<r.sections.length;o++){let f=r.sections[o];if(f.position.start.offset<=t.start.offset&&f.position.end.offset>=t.end.offset){i=f.position.start.offset,a=f.position.end.offset;break}}let l=n.substring(i,a),s=document.createElement("div");return s.setAttribute("uic","uic"),await yr.MarkdownRenderer.renderMarkdown(l,s,e.path,Xt),s};var xr=require("obsidian"),Cr=async(e,t,n,r,i,a,l)=>{let s=createDiv();s.addClass(a?"snw-ref-title-popover":"snw-ref-title-side-pane"),s.addClass("tree-item-self"),s.addClass("is-clickable"),s.setAttribute("snw-ref-title-type",e),s.setAttribute("snw-ref-title-key",t),s.setAttribute("snw-data-file-name",n),s.setAttribute("snw-data-line-number",i.toString());let o=createDiv();if(o.addClass("snw-ref-title-popover-label"),o.innerText=t,s.append(o),a){let f=createSpan();f.addClass("snw-ref-title-popover-icon"),(0,xr.setIcon)(f,"more-horizontal");let u=createSpan();u.appendChild(f),u.addClass("snw-ref-title-popover-open-sidepane-icon"),u.setAttribute("snw-ref-title-type",e),u.setAttribute("snw-ref-title-key",t),u.setAttribute("snw-data-file-name",n),u.setAttribute("snw-data-line-number",i.toString()),s.appendChild(u),setTimeout(async()=>{u&&(u.onclick=async w=>{w.stopPropagation(),br({duration:0});let v=w.target.closest(".snw-ref-title-popover-open-sidepane-icon"),g=v.getAttribute("snw-ref-title-type"),b=v.getAttribute("snw-ref-title-key"),h=v.getAttribute("snw-data-file-name"),P=v.getAttribute("snw-data-line-number");l.activateView(g,b,h,Number(P))})},300)}return s};var Tn=async(e,t,n,r,i,a)=>{let l=await ro(e,t,n),s=createDiv();s.append(await Cr(e,t,n,l.refCount,r,i,a));let o=createDiv();return o.addClass("snw-ref-area"),o.append(l.response),s.append(o),s},ro=async(e,t,n)=>{let r=0,i=null;if(e==="File"){let o=Nt().filter(f=>(f==null?void 0:f.resolvedFile.path)===n);r=o.length,i=o}else{let s=ut()[t];s===void 0&&(s=ut()[n+"#^"+t]);let o=await io(s);r=o.length,i=o}let a=Array.from(new Set(i.map(s=>s.sourceFile.path))).map(s=>i.find(o=>o.sourceFile.path===s)),l=createDiv();for(let s of a){let o=createDiv();o.addClass("snw-ref-item-container"),o.addClass("tree-item"),l.appendChild(o);let f=createDiv();f.addClass("snw-ref-item-file"),f.addClass("tree-item-self"),f.addClass("search-result-file-title"),f.addClass("is-clickable"),f.setAttribute("snw-data-line-number","-1"),f.setAttribute("snw-data-file-name",s.sourceFile.path.replace(".md","")),f.setAttribute("data-href",s.sourceFile.path),f.setAttribute("href",s.sourceFile.path);let u=createDiv();u.addClass("snw-ref-item-file-icon"),u.addClass("tree-item-icon"),u.addClass("collapse-icon"),(0,Tr.setIcon)(u,"file-box");let w=createDiv();w.addClass("snw-ref-item-file-label"),w.addClass("tree-item-inner"),w.innerText=s.sourceFile.basename,f.append(u),f.append(w),o.appendChild(f);let v=createDiv();v.addClass("snw-ref-item-collection-items"),v.addClass("search-result-file-matches"),o.appendChild(v);for(let g of i)s.sourceFile.path===g.sourceFile.path&&v.appendChild(await Er(g))}return{response:l,refCount:r}},io=async e=>e.sort((t,n)=>t.sourceFile.basename.localeCompare(n.sourceFile.basename)||Number(t.reference.position.start.line)-Number(n.reference.position.start.line));var pe=null;function Sr(e){pe=e,Pr(e)}var zt=async e=>{let{refType:t,key:n,filePath:r,lineNu:i}=await oo(e),a=createDiv();a.addClass("snw-popover-container"),a.addClass("search-result-container"),a.appendChild(await Tn(t,n,r,i,!0,pe)),e.setContent(a),setTimeout(async()=>{await Ir(!1,a)},500)},Or=async(e,t,n,r)=>{let i=createDiv();return i.addClass("snw-sidepane-container"),i.addClass("search-result-container"),i.append(await Tn(e,t,n,r,!1,pe)),setTimeout(async()=>{await Ir(!1,i)},500),i},Ir=async(e,t)=>{t.querySelectorAll(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-side-pane, .snw-ref-title-popover").forEach(r=>{r.getAttribute("snw-has-handler")||(r.setAttribute("snw-has-handler","true"),r.addEventListener("click",async i=>{var u,w;i.preventDefault();let a=i.target.closest(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-side-pane, .snw-ref-title-popover"),l=Number(a.getAttribute("snw-data-line-number")),s=a.getAttribute("snw-data-file-name"),o=app.metadataCache.getFirstLinkpathDest(s,s);(i.ctrlKey||i.metaKey)&&i.altKey?pe.app.workspace.getLeaf("split","horizontal").openFile(o):i.ctrlKey||i.metaKey?pe.app.workspace.getLeaf("split","vertical").openFile(o):i.altKey?pe.app.workspace.getLeaf("window").openFile(o):pe.app.workspace.getLeaf(!1).openFile(o);let f=a.getAttribute("snw-ref-title-key");if(f){if(f.contains("#^")){let v=Object.entries((u=pe.app.metadataCache.getFileCache(o))==null?void 0:u.blocks);if(v){let g=f.match(/#\^(.+)$/g)[0].replace("#^","").toLowerCase();l=v.find(h=>h[0]===g)[1].position.start.line}}else if(f.contains("#")){let v=(w=pe.app.metadataCache.getFileCache(o))==null?void 0:w.headings;if(v){let g=f.match(/#(.+)/g)[0].replace("#","");l=v.find(h=>h.heading===g).position.start.line}}}l>0&&setTimeout(()=>{pe.app.workspace.getActiveViewOfType(kr.MarkdownView).setEphemeralState({line:l})},400)}),pe.app.internalPlugins.plugins["page-preview"].enabled===!0&&r.addEventListener("mouseover",i=>{i.preventDefault();let a=app.internalPlugins.plugins["page-preview"].instance.overrides["obsidian42-strange-new-worlds"]!=!1;if(a===!1||a===!0&&(i.ctrlKey||i.metaKey)){let l=i.target,s={scroll:Number(l.getAttribute("snw-data-line-number"))},o=l.getAttribute("snw-data-file-name");o&&app.workspace.trigger("link-hover",{},l,o,"",s)}}))})},oo=async e=>{let t=e.reference,n=t.getAttribute("data-snw-type"),r=t.getAttribute("data-snw-key"),i=t.getAttribute("data-snw-filepath"),a=Number(t.getAttribute("snw-data-line-number"));return{refType:n,key:r,filePath:i,lineNu:a}};var kn=require("obsidian"),Q;function Lr(e){Q=e}function xe(e,t,n,r,i,a){var s,o;(s=Q==null?void 0:Q.snwAPI.enableDebugging)!=null&&s.HtmlDecorationElements&&Q.snwAPI.console("htmlDecorations.htmlDecorationForReferencesElement(count, referenceType, key, filePath)",Q,e,t,n,r);let l=document.createElement("div");return l.className="snw-reference snw-"+t,l.innerText=e.toString(),l.setAttribute("data-snw-type",t),l.setAttribute("data-snw-key",n),l.setAttribute("data-snw-filepath",r),l.setAttribute("snw-data-line-number",a.toString()),i&&l.addClass(i),(kn.Platform.isDesktop||kn.Platform.isDesktopApp)&&(l.onclick=async f=>Kt(f.target)),(o=Q==null?void 0:Q.snwAPI.enableDebugging)!=null&&o.HtmlDecorationElements&&Q.snwAPI.console("returned element",l),Yt(l,{interactive:!0,appendTo:()=>l.closest(".view-content"),allowHTML:!0,onShow(f){setTimeout(async()=>{await zt(f)},1)}}),l}var Kt=async e=>{var a;let t=e.getAttribute("data-snw-type"),n=e.getAttribute("data-snw-key"),r=e.getAttribute("data-snw-filepath"),i=e.getAttribute("snw-data-line-number");(a=Q.snwAPI.enableDebugging)!=null&&a.HtmlDecorationElements&&Q.snwAPI.console("htmlDecorations.processHtmlDecorationReferenceEvent: target, key, refType, filePath",e,n,t,r),Q.activateView(t,n,r,Number(i))};var nt;function Dr(e){nt=e}var Ar=Ce.ViewPlugin.fromClass(class{constructor(e){this.view=e;this.decorations=Ce.Decoration.none;this.regxPattern="";nt.settings.enableRenderingBlockIdInLivePreview&&(this.regxPattern="(\\s\\^)(\\S+)$"),nt.settings.enableRenderingEmbedsInLivePreview&&(this.regxPattern+=(this.regxPattern!=""?"|":"")+"!\\[\\[(.*?)\\]\\]"),nt.settings.enableRenderingLinksInLivePreview&&(this.regxPattern+=(this.regxPattern!=""?"|":"")+"\\[\\[(.*?)\\]\\]"),nt.settings.enableRenderingHeadersInLivePreview&&(this.regxPattern+=(this.regxPattern!=""?"|":"")+"^#+\\s.+"),this.regxPattern!==""&&(this.decorator=new Ce.MatchDecorator({regexp:new RegExp(this.regxPattern,"g"),decorate:(t,n,r,i,a)=>{var u,w,v,g;let l=a.state.field(Rr.editorInfoField),s=i[0].charAt(0),o=Se(l.file),f=[];if(s===" "&&((u=o==null?void 0:o.blocks)==null?void 0:u.length)>0)f.push({key:l.file.path.replace(".md","")+i[0].replace(" ^","#^"),transformedCachedItem:o.blocks,refType:"block",from:r,to:r});else if(s==="!"&&((w=o==null?void 0:o.embeds)==null?void 0:w.length)>0)f.push({key:i[0].replace("![[","").replace("]]",""),transformedCachedItem:o.embeds,refType:"embed",from:r,to:r});else if(s==="["&&((v=o==null?void 0:o.links)==null?void 0:v.length)>0)f.push({key:i[0].replace("[[","").replace("]]",""),transformedCachedItem:o.links,refType:"link",from:r,to:r});else if(s==="#"&&((g=o==null?void 0:o.headings)==null?void 0:g.length)>0){f.push({key:i[0].replace(/^#+/,"").substring(1),transformedCachedItem:o.headings,refType:"heading",from:r,to:r});let b=i[0].match(/\[\[(.*?)\]\]|!\[\[(.*?)\]\]/g);if(b)for(let h of b)f.push({key:h.replace("![[","").replace("[[","").replace("]]",""),transformedCachedItem:h.startsWith("!")?o.embeds:o.links,refType:"link",from:r-i[0].length+(i[0].indexOf(h)+h.length),to:r-i[0].length+(i[0].indexOf(h)+h.length)})}for(let b of f.sort((h,P)=>h.to-P.to))if(b.key!=""){let h=ao(b.refType,b.key,b.transformedCachedItem,l.file.path);h!=null&&t(b.from,b.to,Ce.Decoration.widget({widget:h,side:1}))}}}),this.regxPattern!=""&&(this.decorations=this.decorator.createDeco(e)))}update(e){this.regxPattern!=""&&(e.docChanged||e.viewportChanged)&&(this.decorations=this.decorator.updateDeco(e,this.decorations))}},{decorations:e=>e.decorations}),ao=(e,t,n,r)=>{(e==="embed"||e==="link")&&t.contains("|")&&(t=t.substring(0,t.search(/\|/)));for(let i=0;i<n.length;i++){let a=n[i],l=a.key;if(e==="heading"&&(l=a.headerMatch,t=t.replace(/^\s+|\s+$/g,"")),l===t)return(a==null?void 0:a.references.length)>=nt.settings.minimumRefCountThreshold?new Sn(a.references.length,a.type,a.key,a.references[0].resolvedFile.path.replace(".md",""),null,a.pos.start.line):null}},Sn=class extends Ce.WidgetType{constructor(n,r,i,a,l,s){super();this.referenceCount=n,this.referenceType=r,this.key=i,this.filePath=a,this.addCssClass=l,this.lineNu=s}toDOM(){return xe(this.referenceCount,this.referenceType,this.key,this.filePath,this.addCssClass,this.lineNu)}destroy(){}ignoreEvent(){return!1}};var Mr=require("obsidian");var re;function Nr(e){re=e}function In(e,t){var r,i;if(re.snwAPI.enableDebugging.PreviewRendering&&re.snwAPI.console("markdownPreviewProcessor(HTMLElement, MarkdownPostProcessorContext,ctx.getSectionInfo",e,t,t.getSectionInfo(e)),t.remainingNestLevel===4||e.hasAttribute("uic"))return;let n=re.app.vault.fileMap[t.sourcePath];(i=(r=re.app.metadataCache.getFileCache(n))==null?void 0:r.frontmatter)!=null&&i["kanban-plugin"]||t.addChild(new On(e,t.getSectionInfo(e),n))}var On=class extends Mr.MarkdownRenderChild{constructor(n,r,i){super(n);this.containerEl=n,this.sectionInfo=r,this.currentFile=i,re.snwAPI.enableDebugging.PreviewRendering&&re.snwAPI.console("snwChildComponent(HTMLElement, MarkdownPostProcessorContext,currentfile",n,r,i)}onload(){this.processMarkdown()}processMarkdown(){var i,a;let n=re.settings.minimumRefCountThreshold,r=Se(this.currentFile);if((r==null?void 0:r.blocks)||r.embeds||r.headings||r.links){if(re.settings.enableRenderingBlockIdInMarkdown&&(r==null?void 0:r.blocks)){let l=!1;try{l=ctx.containerEl.closest(".snw-embed-preview").nextSibling.classList.contains("snw-reference")}catch(s){}for(let s of r.blocks)if(s.references.length>=n&&s.pos.start.line>=((i=this.sectionInfo)==null?void 0:i.lineStart)&&s.pos.end.line<=((a=this.sectionInfo)==null?void 0:a.lineEnd)&&!l){let o=xe(s.references.length,"block",s.key,s.references[0].resolvedFile.path.replace(".md",""),"",s.pos.start.line),f=this.containerEl.querySelector("p");f||(f=this.containerEl.querySelector("li"));try{if(!f.hasClass("snw-block-preview")){o.addClass("snw-block-preview"),f.append(o);break}}catch(u){}}}if(re.settings.enableRenderingEmbedsInMarkdown&&(r==null?void 0:r.embeds)&&this.containerEl.querySelectorAll(".internal-embed:not(.snw-embed-preview)").forEach(l=>{let s=l.getAttribute("src");for(let o of r.embeds)if(o.references.length>=n&&s.endsWith(o.key)){let f=xe(o.references.length,"embed",o.key,o.references[0].resolvedFile.path.replace(".md",""),"",o.pos.start.line);f.addClass("snw-embed-preview"),l.after(f);break}}),re.settings.enableRenderingHeadersInMarkdown){let l=this.containerEl.querySelector("[data-heading]");if((r==null?void 0:r.headings)&&l){let s=l.getAttribute("data-heading");for(let o of r.headings)if(o.references.length>=n&&o.headerMatch===s){let f=xe(o.references.length,"heading",o.key,o.references[0].resolvedFile.path.replace(".md",""),"",o.pos.start.line);f.addClass("snw-heading-preview"),this.containerEl.querySelector("h1,h2,h3,h4,h5,h6").insertAdjacentElement("beforeend",f);break}}}re.settings.enableRenderingLinksInMarkdown&&(r==null?void 0:r.links)&&this.containerEl.querySelectorAll("a.internal-link:not(.snw-link-preview)").forEach(l=>{let s=l.getAttribute("data-href");for(let o of r.links)if(o.references.length>=n&&(o.key===s||(o==null?void 0:o.original)!=null&&(o==null?void 0:o.original.contains(s)))){let f=xe(o.references.length,"link",o.key,o.references[0].resolvedFile.path.replace(".md",""),"",o.pos.start.line);f.addClass("snw-link-preview"),l.after(f);break}})}}};var Et=require("@codemirror/view"),Fr=require("obsidian");var rt;function Hr(e){rt=e}var so=class extends Et.GutterMarker{constructor(t,n,r,i,a){super();this.referenceCount=t,this.referenceType=n,this.key=r,this.filePath=i,this.addCssClass=a}toDOM(){return xe(this.referenceCount,this.referenceType,this.key,this.filePath,this.addCssClass,0)}},lo=new class extends Et.GutterMarker{toDOM(){return document.createTextNode("\xF8\xF8\xF8")}},po=(0,Et.gutter)({class:"snw-gutter-ref",lineMarker(e,t){var i;rt.snwAPI.enableDebugging.GutterEmbedCounter&&rt.snwAPI.console("ReferenceGutterExtension(EditorView, BlockInfo)",e,t);let n=e.state.field(Fr.editorInfoField);if(!n.file)return;let r=(i=n.app.metadataCache.getFileCache(n.file))==null?void 0:i.embeds;if((r==null?void 0:r.length)>=rt.settings.minimumRefCountThreshold){let a=e.state.doc.lineAt(t.from).number;for(let l of r)if(l.position.start.line+1===a){let s=Se(n.file);for(let o of s.embeds)if((o==null?void 0:o.references.length)>0&&(o==null?void 0:o.pos.start.line)+1===a){let f=o.references[0].reference.original;if(f.substring(0,1)!="!"&&(f="!"+f),e.state.doc.lineAt(t.from).text.trim()===f)return rt.snwAPI.enableDebugging.GutterEmbedCounter&&rt.snwAPI.console("ReferenceGutterExtension New gutter",o.references.length,"embed",o.key,o.key,"snw-embed-special"),new so(o.references.length,"embed",o.key,o.references[0].resolvedFile.path.replace(".md",""),"snw-embed-special")}}}},initialSpacer:()=>lo}),Vr=po;var Ln=require("obsidian");var ge;function Wr(e){ge=e}function Rn(){var e;(e=ge.snwAPI.enableDebugging)!=null&&e.LinkCountInHeader&&ge.snwAPI.console("headerImageCount.setHeaderWithReferenceCounts(thePlugin)",it),ge.app.workspace.iterateAllLeaves(t=>{t.view.getViewType()==="markdown"&&fo(t.view)})}function fo(e){var l,s;(l=ge.snwAPI.enableDebugging)!=null&&l.LinkCountInHeader&&ge.snwAPI.console("headerImageCount.processHeader(ThePlugin, MarkdownView)",ge,e);let n=Nt().filter(o=>(o==null?void 0:o.resolvedFile.path)===e.file.path);if(n.length<ge.settings.minimumRefCountThreshold){e.contentEl.querySelector(".snw-header-count-wrapper")&&e.contentEl.querySelector(".snw-header-count-wrapper").remove();return}let r=e.contentEl.querySelector(".snw-header-count");if(r&&r.getAttribute("data-snw-key")===e.file.basename){r.innerText=" "+n.length.toString()+" ";return}let i=e.contentEl;e.contentEl.querySelector(".snw-header-count-wrapper")&&e.contentEl.querySelector(".snw-header-count-wrapper").remove();let a=i.querySelector(".snw-header-count-wrapper");a?r=i.querySelector(".snw-header-count"):(a=document.createElement("div"),a.className="snw-header-count-wrapper",r=document.createElement("div"),r.className="snw-header-count",a.appendChild(r),i.prepend(a)),r.innerText=" "+n.length.toString()+" ",(Ln.Platform.isDesktop||Ln.Platform.isDesktopApp)&&(r.onclick=o=>{o.stopPropagation(),Kt(a)}),a.setAttribute("data-snw-key",e.file.basename),a.setAttribute("data-snw-type","File"),a.setAttribute("data-snw-filepath",e.file.path),a.onclick=o=>{o.stopPropagation(),Kt(o.target)},Yt(a,{interactive:!0,appendTo:()=>a.closest(".view-content"),allowHTML:!0,onShow(o){setTimeout(async()=>{await zt(o)},1)}}),(s=ge.snwAPI.enableDebugging)!=null&&s.LinkCountInHeader&&ge.snwAPI.console("snwTitleRefCountDisplayCountEl",r)}var Br=require("obsidian");var Ue="Strange New Worlds",Jt=class extends Br.ItemView{constructor(n,r){super(n);this.thePlugin=r}getViewType(){return Ue}getDisplayText(){return"Strange New Worlds"}getIcon(){return"dot-network"}async onOpen(){let n=this.containerEl,r=n.createSpan({cls:"snw-sidepane-loading"}),i=createDiv({cls:"snw-sidepane-loading-banner"});i.innerText="Discovering Strange New Worlds...",r.appendChild(i);let a=createDiv({cls:"snw-sidepane-loading-subtext"});a.innerText="Click a reference counter in the main document for information to appear here.",r.appendChild(a),n.empty(),n.appendChild(r)}async updateView(){let n=this.thePlugin.lastSelectedReferenceType,r=this.thePlugin.lastSelectedReferenceKey,i=this.thePlugin.lastSelectedReferenceFilePath,a=this.thePlugin.lastSelectedLineNumber;this.thePlugin.snwAPI.enableDebugging.SidePane&&(this.thePlugin.snwAPI.console("sidepane.open() refType, key, filePath",n,r,i),this.thePlugin.snwAPI.console("sidepane.open() getReferencesCache()",ut())),this.containerEl.replaceChildren(await Or(n,r,i,a))}async onClose(){}};var q=require("obsidian"),jr={minimumRefCountThreshold:1,displayIncomingFilesheader:!0,displayInlineReferencesLivePreview:!0,displayInlineReferencesMarkdown:!0,displayEmbedReferencesInGutter:!0,cacheUpdateInMilliseconds:500,enableRenderingBlockIdInMarkdown:!0,enableRenderingLinksInMarkdown:!0,enableRenderingHeadersInMarkdown:!0,enableRenderingEmbedsInMarkdown:!0,enableRenderingBlockIdInLivePreview:!0,enableRenderingLinksInLivePreview:!0,enableRenderingHeadersInLivePreview:!0,enableRenderingEmbedsInLivePreview:!0},Qt=class extends q.PluginSettingTab{constructor(n,r){super(n,r);this.thePlugin=r}display(){let{containerEl:n}=this;n.empty(),n.createEl("h2",{text:this.thePlugin.appName}),n.createEl("h2",{text:"View Modes"}),new q.Setting(n).setName("Incoming Links Header Count").setDesc("In header of a document, show number of incoming link to that file.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayIncomingFilesheader),r.onChange(async i=>{this.thePlugin.settings.displayIncomingFilesheader=i,this.thePlugin.toggleStateHeaderCount(),await this.thePlugin.saveSettings()})}),new q.Setting(n).setName("Show SNW indicators in Live Preview Editor").setDesc("While using Live Preview, Display inline of the text of documents all reference counts for links, blocks and embeds.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayInlineReferencesLivePreview),r.onChange(async i=>{this.thePlugin.settings.displayInlineReferencesLivePreview=i,this.thePlugin.toggleStateSNWLivePreview(),await this.thePlugin.saveSettings()})}),new q.Setting(n).setName("Show SNW indicators in Reading view ").setDesc("While in Reading View of a document, display inline of the text of documents all reference counts for links, blocks and embeds.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayInlineReferencesMarkdown),r.onChange(async i=>{this.thePlugin.settings.displayInlineReferencesMarkdown=i,this.thePlugin.toggleStateSNWMarkdownPreview(),await this.thePlugin.saveSettings()})}),new q.Setting(n).setName("Embed references in Gutter in Live Preview Mode").setDesc(`Displays a count of references in the gutter while in live preview. This is done only in a
					  special scenario. It has to do with the way Obsidian renders embeds, example: ![[link]] when  
					  they are on its own line. Strange New Worlds cannot embed the count in this scenario, so a hint is 
					  displayed in the gutter. It is a hack, but at least we get some information.`).addToggle(r=>{r.setValue(this.thePlugin.settings.displayEmbedReferencesInGutter),r.onChange(async i=>{this.thePlugin.settings.displayEmbedReferencesInGutter=i,this.thePlugin.toggleStateSNWGutters(),await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"Enable Reference Types in Reading mode"}),n.createEl("sup",{text:"(requires reopening documents to take effect)"}),new q.Setting(n).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingBlockIdInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingBlockIdInMarkdown=i,await this.thePlugin.saveSettings()})}),new q.Setting(n).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingEmbedsInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingEmbedsInMarkdown=i,await this.thePlugin.saveSettings()})}),new q.Setting(n).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingLinksInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingLinksInMarkdown=i,await this.thePlugin.saveSettings()})}),new q.Setting(n).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingHeadersInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingHeadersInMarkdown=i,await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"Enable Reference Types in Live Preview Mode"}),n.createEl("sup",{text:"(requires reopening documents to take effect)"}),new q.Setting(n).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingBlockIdInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingBlockIdInLivePreview=i,await this.thePlugin.saveSettings()})}),new q.Setting(n).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingEmbedsInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingEmbedsInLivePreview=i,await this.thePlugin.saveSettings()})}),new q.Setting(n).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingLinksInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingLinksInLivePreview=i,await this.thePlugin.saveSettings()})}),new q.Setting(n).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingHeadersInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingHeadersInLivePreview=i,await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"Other Settings"}),new q.Setting(n).setName("Minimal file count threshold").setDesc(`This setting defines how many references there needs to be for the reference count box to appear. Default is one reference.
					 Currently set to: ${this.thePlugin.settings.minimumRefCountThreshold} refernences.`).addSlider(r=>r.setLimits(1,20,1).setValue(this.thePlugin.settings.minimumRefCountThreshold).onChange(async i=>{this.thePlugin.settings.minimumRefCountThreshold=i,await this.thePlugin.saveSettings()}).setDynamicTooltip()),n.createEl("h2",{text:"Cache Tuning"}),new q.Setting(n).setName("How often should the SNW Cache update").setDesc(`By default SNW will updates its internal cache every half a second (500 milliseconds) when there is some change in the vualt.
					  Increase the time to slighlty improve performance on less performant devices or decrease it to improve refresh of vault information.
					  Currently set to: ${this.thePlugin.settings.cacheUpdateInMilliseconds} milliseconds. (Requires Obsidian Restart)`).addSlider(r=>r.setLimits(500,3e4,100).setValue(this.thePlugin.settings.cacheUpdateInMilliseconds).onChange(async i=>{this.thePlugin.settings.cacheUpdateInMilliseconds=i,await this.thePlugin.saveSettings()}).setDynamicTooltip())}};var xt=class{constructor(t){this.enableDebugging={CM6Extension:!1,PreviewRendering:!1,LinkCountInHeader:!1,GutterEmbedCounter:!1,HtmlDecorationElements:!1,SidePane:!1};this.console=(t,...n)=>{console.log("SNW: "+t,n)};this.getMetaInfoByCurrentFile=async()=>this.getMetaInfoByFileName(app.workspace.getActiveFile().path);this.getMetaInfoByFileName=async t=>{let n=app.metadataCache.getFirstLinkpathDest(t,"/");return{TFile:n,metadataCache:app.metadataCache.getFileCache(n),SnwTransformedCache:Se(n)}};this.plugin=t}};var it=class extends $e.Plugin{constructor(){super(...arguments);this.appName="Obsidian42 - Strange New Worlds";this.appID="obsidian42-strange-new-worlds";this.markdownPostProcessorSNW=null;this.editorExtensions=[]}async onload(){console.log("loading "+this.appName),Mn(this),Lr(this),Hr(this),Wr(this),Nr(this),Dr(this),Sr(this),this.snwAPI=new xt(this),globalThis.snwAPI=this.snwAPI,await this.loadSettings(),this.addSettingTab(new Qt(this.app,this)),this.registerView(Ue,r=>new Jt(r,this));let n=(0,$e.debounce)(()=>{Ft()},1e3,!0);this.registerEvent(this.app.metadataCache.on("resolve",r=>n())),this.app.workspace.registerHoverLinkSource(this.appID,{display:this.appName,defaultMod:!0}),this.snwAPI.settings=this.settings,this.registerEditorExtension(this.editorExtensions),this.toggleStateHeaderCount(),this.toggleStateSNWMarkdownPreview(),this.toggleStateSNWLivePreview(),this.toggleStateSNWGutters(),this.app.workspace.onLayoutReady(async()=>{let r=this.app.metadataCache.on("resolved",async()=>{var i;Ft(),this.app.metadataCache.offref(r),(i=this.app.workspace.getLeavesOfType(Ue))!=null&&i.length||await this.app.workspace.getRightLeaf(!1).setViewState({type:Ue,active:!1})})})}async layoutChangeEvent(){Rn()}async activateView(n,r,i,a){this.lastSelectedReferenceKey=r,this.lastSelectedReferenceType=n,this.lastSelectedReferenceFilePath=i,this.lastSelectedLineNumber=a,this.app.workspace.rightSplit.expand(),await this.app.workspace.getLeavesOfType(Ue)[0].view.updateView(),setTimeout(()=>{this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(Ue)[0])},100)}toggleStateHeaderCount(){this.settings.displayIncomingFilesheader===!0?this.app.workspace.on("layout-change",this.layoutChangeEvent):this.app.workspace.off("layout-change",this.layoutChangeEvent)}toggleStateSNWMarkdownPreview(){this.settings.displayInlineReferencesMarkdown==!0&&this.markdownPostProcessorSNW===null?this.markdownPostProcessorSNW=this.registerMarkdownPostProcessor((r,i)=>In(r,i)):($e.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessorSNW),this.markdownPostProcessorSNW=null)}toggleStateSNWLivePreview(){this.updateCMExtensionState("inline-ref",this.settings.displayInlineReferencesLivePreview,Ar)}toggleStateSNWGutters(){this.updateCMExtensionState("gutter",this.settings.displayEmbedReferencesInGutter,Vr)}updateCMExtensionState(n,r,i){if(r==!0)this.editorExtensions.push(i),this.editorExtensions[this.editorExtensions.length-1].snwID=n;else for(let a=0;a<this.editorExtensions.length;a++)if(this.editorExtensions[a].snwID===n){this.editorExtensions.splice(a,1);break}this.app.workspace.updateOptions()}async loadSettings(){this.settings=Object.assign({},jr,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}onunload(){console.log("unloading "+this.appName);try{$e.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessorSNW),this.app.workspace.unregisterHoverLinkSource(this.appID)}catch(n){}}};
